pipeline {
    agent any
    triggers {
        githubPush()  // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –ø—Ä–∏ push
    }
    stages {
        stage('Checkout') {
            steps {
                echo 'üéØ –ó–∞–±–æ—Ä –∫–æ–¥–∞ –∏–∑ GitHub...'
                checkout scm
                sh '''
                    echo "–†–µ–ø–æ: ${env.GIT_URL}"
                    echo "–í–µ—Ç–∫–∞: ${env.GIT_BRANCH}"
                    echo "–ö–æ–º–º–∏—Ç: ${env.GIT_COMMIT}"
                '''
            }
        }
        stage('Build') {
            steps {
                echo 'üî® –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞...'
                // –í–∞—à–∏ –∫–æ–º–∞–Ω–¥—ã —Å–±–æ—Ä–∫–∏
                sh 'echo "–°–±–æ—Ä–∫–∞ –∑–∞–ø—É—â–µ–Ω–∞ –∏–∑ –∫–æ–º–º–∏—Ç–∞: ${env.GIT_COMMIT}"'
            }
        }
        stage('Notifications') {
            steps {
                echo 'üìß –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è...'
                sh 'echo "–ü–∞–π–ø–ª–∞–π–Ω –∑–∞–ø—É—â–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ –≤–µ–±—Ö—É–∫—É"'
            }
        }
    }
    post {
        always {
            echo 'üèÅ –ü–∞–π–ø–ª–∞–π–Ω –∑–∞–≤–µ—Ä—à–µ–Ω'
            sh 'echo "–í—Ä–µ–º—è: $(date)"'
        }
        success {
            echo '‚úÖ –£—Å–ø–µ—Ö! –ü–∞–π–ø–ª–∞–π–Ω –≤—ã–ø–æ–ª–Ω–µ–Ω –ø–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞'
        }
        changed {
            echo 'üîÑ –°—Ç–∞—Ç—É—Å –∏–∑–º–µ–Ω–∏–ª—Å—è –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å –ø—Ä–µ–¥—ã–¥—É—â–µ–π —Å–±–æ—Ä–∫–æ–π'
        }
    }
}
